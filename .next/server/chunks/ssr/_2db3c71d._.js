module.exports=[3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},83966,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(53250),f=a.i(19817),g=a.i(3130),h=a.i(40695),i=a.i(56711);function j(){let a=(0,d.useSearchParams)(),j=a.get("show_id"),k=a.get("movie_id"),l=(0,d.useRouter)(),{isAuthenticated:m}=(0,f.useAuth)(),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)(!0),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(!1);(0,c.useEffect)(()=>{j&&k?B():(y("Missing show or movie information"),u(!1))},[j,k]);let B=async()=>{try{let[a,b]=await Promise.all([e.moviesApi.getById(k),e.showsApi.getAll({movie_id:k})]);o(a);let c=b.find(a=>a.id===j);c?q(c):y("Show not found")}catch(a){y(a.message||"Failed to load data")}finally{u(!1)}},C=async()=>{if(!m)return void l.push("/login");if(!p||0===r.length)return void y("Please select at least one seat");w(!0),y("");try{await e.bookingsApi.create({show_id:p.id,seat_numbers:r,total_price:p.price*r.length}),A(!0),setTimeout(()=>l.push("/"),2e3)}catch(a){y(a.message||"Booking failed")}finally{w(!1)}};return t?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-xl",children:"Loading..."})}):z?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-green-50",children:(0,b.jsx)(g.Card,{className:"max-w-md",children:(0,b.jsxs)(g.CardContent,{className:"p-8 text-center",children:[(0,b.jsx)("div",{className:"text-6xl mb-4",children:"ðŸŽ‰"}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-green-600 mb-2",children:"Booking Confirmed!"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Redirecting to home..."})]})})}):p&&n?(0,b.jsx)("div",{className:"min-h-screen bg-[#0F172A] p-6",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-6 text-[#E5E7EB]",children:"Select Seats"}),(0,b.jsx)(g.Card,{className:"mb-6 bg-[#111827] border-[#374151]",children:(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)(g.CardTitle,{className:"text-[#E5E7EB]",children:n.title}),(0,b.jsxs)("div",{className:"text-[#9CA3AF]",children:[p.theaters.name,", ",p.theaters.city,(0,b.jsx)("br",{}),(0,i.format)(new Date(p.start_time),"MMM dd, h:mm a")]})]})}),(0,b.jsx)(g.Card,{className:"mb-6 bg-[#111827] border-[#374151]",children:(0,b.jsxs)(g.CardContent,{className:"pt-6",children:[(0,b.jsx)("div",{className:"mb-8 text-center",children:(0,b.jsx)("div",{className:"inline-block bg-[#1F2937] px-16 py-2 rounded-b-lg text-sm font-semibold tracking-widest text-[#9CA3AF] shadow-md border-t-0 border border-[#374151]",children:"SCREEN"})}),(0,b.jsx)("div",{className:"grid grid-cols-10 gap-3 max-w-2xl mx-auto mb-8",children:(()=>{let a=[];for(let b of["A","B","C","D","E","F"])for(let c=1;c<=10;c++)a.push(`${b}${c}`);return a})().map(a=>(0,b.jsx)(h.Button,{size:"sm",variant:r.includes(a)?"default":"outline",onClick:()=>{s(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a])},className:`h-10 transition-all ${r.includes(a)?"bg-[#2563EB] hover:bg-[#1D4ED8] text-white border-transparent":"bg-[#374151] hover:bg-[#4B5563] text-gray-200 border-transparent"}`,children:a},a))}),(0,b.jsxs)("div",{className:"border-t border-[#374151] pt-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-[#9CA3AF] mb-1",children:"Selected Seats"}),(0,b.jsx)("div",{className:"font-semibold text-lg text-[#E5E7EB]",children:r.join(", ")||"None"})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"text-sm text-[#9CA3AF] mb-1",children:"Total Amount"}),(0,b.jsxs)("div",{className:"text-2xl font-bold text-[#FACC15]",children:["â‚¹",p.price*r.length]})]})]}),x&&(0,b.jsx)("div",{className:"mb-4 p-4 bg-red-900/20 text-red-500 rounded-md border border-red-900/50",children:x}),(0,b.jsx)(h.Button,{onClick:C,disabled:0===r.length||v,size:"lg",className:"w-full text-lg h-12 bg-[#2563EB] hover:bg-[#1D4ED8] text-white font-bold",children:v?"Processing...":"Confirm Booking"})]})]})})]})}):(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-red-500",children:x||"Something went wrong"})})}function k(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{children:"Loading..."}),children:(0,b.jsx)(j,{})})}a.s(["default",()=>k])}];

//# sourceMappingURL=_2db3c71d._.js.map
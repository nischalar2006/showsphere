(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75254,e=>{"use strict";var r=e.i(71645);let t=(...e)=>e.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim();var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=(0,r.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:s="",children:l,iconNode:d,...u},c)=>(0,r.createElement)("svg",{ref:c,...o,width:a,height:a,stroke:e,strokeWidth:i?24*Number(n)/Number(a):n,className:t("lucide",s),...u},[...d.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(l)?l:[l]])),n=(e,o)=>{let n=(0,r.forwardRef)(({className:n,...i},s)=>(0,r.createElement)(a,{ref:s,iconNode:o,className:t(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,n),...i}));return n.displayName=`${e}`,n};e.s(["default",()=>n],75254)},7233,e=>{"use strict";let r=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>r],7233)},27612,e=>{"use strict";let r=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>r],27612)},89076,e=>{"use strict";e.i(47167);var r=e.i(43476),t=e.i(71645),o=e.i(7233);let a=(0,e.i(75254).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);function n({onSubmit:e,initialData:o,isEditing:a,onCancel:n,tmdbFetch:i}){let[s,l]=(0,t.useState)({title:"",description:"",genre:"",language:"",duration:0,release_date:"",poster_url:"",backdrop_url:"",trailer_url:"",rating:0});(0,t.useEffect)(()=>{o?l({title:o.title||"",description:o.description||"",genre:Array.isArray(o.genre)?o.genre.join(", "):o.genre||"",language:o.language||"",duration:o.duration||0,release_date:o.release_date||"",poster_url:o.poster_url||"",backdrop_url:o.backdrop_url||"",trailer_url:o.trailer_url||"",rating:o.rating||0}):l({title:"",description:"",genre:"",language:"",duration:0,release_date:"",poster_url:"",backdrop_url:"",trailer_url:"",rating:0})},[o]);let d=async()=>{if(!s.title)return void alert("Please enter a movie title first");try{let e=await i(s.title);e&&(l({...s,title:e.title,description:e.description||"",genre:Array.isArray(e.genre)?e.genre.join(", "):e.genre||"",language:e.language||"English",duration:e.duration||0,release_date:e.release_date||"",poster_url:e.poster_url||"",backdrop_url:e.backdrop_url||"",trailer_url:e.trailer_url||"",rating:e.rating||0}),alert("Movie details fetched from TMDB!"))}catch(e){console.error("Fetch error",e)}};return(0,r.jsxs)("form",{onSubmit:r=>{r.preventDefault(),e(s)},className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",placeholder:"Title",required:!0,className:"flex-1 border border-input bg-secondary text-foreground p-2 rounded focus:ring-2 focus:ring-ring focus:outline-none",value:s.title,onChange:e=>l({...s,title:e.target.value})}),(0,r.jsx)("button",{type:"button",onClick:d,className:"bg-accent text-accent-foreground px-3 py-2 rounded text-sm hover:bg-accent/90 transition-colors whitespace-nowrap",children:"Fetch TMDB"})]}),(0,r.jsx)("input",{type:"text",placeholder:"Genre (comma separated)",required:!0,className:"border border-input bg-secondary text-foreground p-2 rounded focus:ring-2 focus:ring-ring focus:outline-none",value:s.genre,onChange:e=>l({...s,genre:e.target.value})}),(0,r.jsx)("input",{type:"text",placeholder:"Language",required:!0,className:"border border-input bg-secondary text-foreground p-2 rounded focus:ring-2 focus:ring-ring focus:outline-none",value:s.language,onChange:e=>l({...s,language:e.target.value})}),(0,r.jsx)("input",{type:"number",placeholder:"Duration (min)",required:!0,className:"border border-input bg-secondary text-foreground p-2 rounded focus:ring-2 focus:ring-ring focus:outline-none",value:s.duration,onChange:e=>l({...s,duration:Number(e.target.value)})}),(0,r.jsx)("input",{type:"date",required:!0,className:"border border-input bg-secondary text-foreground p-2 rounded focus:ring-2 focus:ring-ring focus:outline-none",value:s.release_date,onChange:e=>l({...s,release_date:e.target.value})}),(0,r.jsx)("input",{type:"number",placeholder:"Rating (0-10)",required:!0,className:"border border-input bg-secondary text-foreground p-2 rounded focus:ring-2 focus:ring-ring focus:outline-none",value:s.rating,onChange:e=>l({...s,rating:Number(e.target.value)})}),(0,r.jsx)("input",{type:"text",placeholder:"Poster URL",required:!0,className:"border border-input bg-secondary text-foreground p-2 rounded md:col-span-2 focus:ring-2 focus:ring-ring focus:outline-none",value:s.poster_url,onChange:e=>l({...s,poster_url:e.target.value})}),(0,r.jsx)("input",{type:"text",placeholder:"Backdrop URL",required:!0,className:"border border-input bg-secondary text-foreground p-2 rounded md:col-span-2 focus:ring-2 focus:ring-ring focus:outline-none",value:s.backdrop_url,onChange:e=>l({...s,backdrop_url:e.target.value})}),(0,r.jsx)("input",{type:"text",placeholder:"Trailer URL (YouTube)",className:"border border-input bg-secondary text-foreground p-2 rounded md:col-span-2 focus:ring-2 focus:ring-ring focus:outline-none",value:s.trailer_url,onChange:e=>l({...s,trailer_url:e.target.value})}),(0,r.jsx)("textarea",{placeholder:"Description",required:!0,className:"border border-input bg-secondary text-foreground p-2 rounded md:col-span-2 focus:ring-2 focus:ring-ring focus:outline-none",rows:3,value:s.description,onChange:e=>l({...s,description:e.target.value})}),(0,r.jsx)("button",{type:"submit",className:`p-2 rounded md:col-span-2 transition-colors ${a?"bg-primary text-primary-foreground hover:bg-primary/90":"bg-green-600 text-white hover:bg-green-700"}`,children:a?"Update Movie":"Add Movie"}),a&&(0,r.jsx)("button",{type:"button",onClick:n,className:"md:col-span-2 text-sm text-muted-foreground hover:text-foreground mt-2",children:"Cancel Edit"})]})}var i=e.i(27612);function s({movies:e,onEdit:t,onDelete:o,isLoading:n}){return n?(0,r.jsx)("p",{className:"text-muted-foreground",children:"Loading..."}):(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:e.map(e=>(0,r.jsxs)("div",{className:"bg-card rounded-lg shadow overflow-hidden relative group border border-border",children:[(0,r.jsx)("img",{src:e.poster_url,alt:e.title,className:"w-full h-64 object-cover"}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h3",{className:"font-bold truncate text-foreground",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:Array.isArray(e.genre)?e.genre.join(", "):e.genre})]}),(0,r.jsxs)("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,r.jsx)("button",{onClick:()=>t(e),className:"bg-primary text-primary-foreground p-2 rounded-full hover:bg-primary/90",children:(0,r.jsx)(a,{size:16})}),(0,r.jsx)("button",{onClick:()=>o(e.id),className:"bg-destructive text-destructive-foreground p-2 rounded-full hover:bg-destructive/90",children:(0,r.jsx)(i.Trash2,{size:16})})]})]},e.id))})}function l(){let[e,i]=(0,t.useState)([]),[l,d]=(0,t.useState)(!0),[u,c]=(0,t.useState)(null),[g,p]=(0,t.useState)(null),h=e=>{let r="http://localhost:5000/api";return r.endsWith("/api")?`${r}/${e}`:`${r}/api/${e}`};(0,t.useEffect)(()=>{m()},[]);let m=async()=>{try{let e=h("movies"),r=await fetch(e),t=await r.json();Array.isArray(t)?i(t):i([])}catch(e){console.error("Failed to fetch movies",e),i([])}finally{d(!1)}},f=async e=>{try{let r=h(`tmdb/search-movie?title=${encodeURIComponent(e)}`),t=await fetch(r),o=await t.json();if(t.ok)return o;return alert(o.error||"Failed to fetch from TMDB"),null}catch(e){return console.error("TMDB Fetch Error",e),alert("Error fetching data"),null}},b=async e=>{let r={...e,genre:"string"==typeof e.genre?e.genre.split(",").map(e=>e.trim()):e.genre};try{let e=u?`${h("movies")}/${u}`:h("movies");(await fetch(e,{method:u?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok?(m(),c(null),p(null),alert(u?"Movie updated successfully":"Movie added successfully")):alert("Failed to save movie")}catch(e){console.error(e)}},x=async e=>{if(confirm("Are you sure?"))try{await fetch(`${h("movies")}/${e}`,{method:"DELETE"}),m()}catch(e){console.error(e)}};return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Manage Movies"}),(0,r.jsxs)("div",{className:"bg-card p-6 rounded-lg shadow-md border border-border",children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,r.jsxs)("h2",{className:"text-lg font-semibold flex items-center text-foreground",children:[u?(0,r.jsx)(a,{className:"mr-2",size:20}):(0,r.jsx)(o.Plus,{className:"mr-2",size:20}),u?"Edit Movie":"Add New Movie"]})}),(0,r.jsx)(n,{onSubmit:b,initialData:g,isEditing:!!u,onCancel:()=>{c(null),p(null)},tmdbFetch:f})]}),(0,r.jsx)(s,{movies:e,onEdit:e=>{c(e.id),p(e),window.scrollTo({top:0,behavior:"smooth"})},onDelete:x,isLoading:l})]})}e.s(["default",()=>l],89076)}]);